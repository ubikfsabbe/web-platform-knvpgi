"use strict";(self.webpackChunkmaquettage_dot=self.webpackChunkmaquettage_dot||[]).push([[446],{8446:(dt,A,d)=>{d.r(A),d.d(A,{AdminModule:()=>st});var I=d(4466),x=d(1819),l=d(2687),f=d(590),g=d(8746),b=d(2887),c=d(433),t=d(1571),p=d(2392),m=d(6895),_=d(2216);function q(o,i){if(1&o&&(t.TgZ(0,"label",18),t._UZ(1,"input",19),t.TgZ(2,"span",20),t._uU(3),t.qZA()()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("checked",e.selected),t.xp6(2),t.Oqu(e.name)}}function U(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",21)(6,"fa-icon",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.editPublicHoliday(a))}),t.qZA(),t.TgZ(7,"fa-icon",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.deletePublicHoliday(a))}),t.qZA()()()}if(2&o){const e=i.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.cronExpr),t.xp6(2),t.Q6J("icon",n.editIcon),t.xp6(1),t.Q6J("icon",n.deleteIcon)}}let v=(()=>{class o{constructor(e,n){this.activeModal=e,this.renderer=n,this.addIcon=l.r8p,this.deleteIcon=l.$aW,this.editIcon=l.Yai,this.saveIcon=l.EdJ,this.name=new c.NI(""),this._nonWorkingDayInfos=[{name:"Dimanche",selected:!1},{name:"Lundi",selected:!1},{name:"Mardi",selected:!1},{name:"Mercredi",selected:!1},{name:"Jeudi",selected:!1},{name:"Vendredi",selected:!1},{name:"Samedi",selected:!1}],this._publicHolidays=[]}ngOnInit(){const e=this.brand;if(e){this.name.setValue(e.name),this._publicHolidays=e.calendar.publicHolidays||[];const n=e.calendar.nonWorkingDays;if(n)for(let r=0;r<7;r++)this._nonWorkingDayInfos[r].selected=n.includes(r)}}ngAfterViewInit(){this.renderer.selectRootElement("#edit-brand-name").focus()}get nonWorkingDayInfos(){return this._nonWorkingDayInfos}get publicHolidays(){return this._publicHolidays}addPublicHoliday(){}deletePublicHoliday(e){}editPublicHoliday(e){}cancel(){this.activeModal.dismiss()}save(){this.activeModal.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.Kz),t.Y36(t.Qsj))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-brand-edit"]],inputs:{brand:"brand"},decls:35,vars:5,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["for","edit-brand-name",1,"form-label"],["id","edit-brand-name","type","text",1,"form-control",3,"formControl"],[1,"mt-3"],[1,"fw-bold"],["class","mx-1",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-primary",3,"click"],[3,"icon"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"text-end"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mx-1"],["type","checkbox",3,"checked"],[1,"ms-1"],[1,"text-end"],[1,"btn",3,"icon","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.cancel()}),t.qZA()(),t.TgZ(2,"div",2)(3,"div")(4,"label",3),t._uU(5,"Nom: "),t.qZA(),t._UZ(6,"input",4),t.qZA(),t.TgZ(7,"div",5)(8,"div",6),t._uU(9,"Jours non-ouvr\xe9s"),t.qZA(),t.YNc(10,q,4,2,"label",7),t.qZA(),t.TgZ(11,"div",5)(12,"div",8)(13,"span",6),t._uU(14,"Jours f\xe9ri\xe9s"),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return n.addPublicHoliday()}),t._UZ(16,"fa-icon",10),t._uU(17," Ajouter un jour f\xe9ri\xe9 "),t.qZA()(),t.TgZ(18,"table",11)(19,"thead")(20,"tr")(21,"th",12),t._uU(22,"Nom"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Fr\xe9quence"),t.qZA(),t.TgZ(25,"th",13),t._uU(26,"Actions"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,U,8,4,"tr",14),t.qZA()()()(),t.TgZ(29,"div",15)(30,"button",16),t.NdJ("click",function(){return n.cancel()}),t._uU(31,"Annuler"),t.qZA(),t.TgZ(32,"button",17),t.NdJ("click",function(){return n.save()}),t._UZ(33,"fa-icon",10),t._uU(34," Enregistrer "),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("formControl",n.name),t.xp6(4),t.Q6J("ngForOf",n.nonWorkingDayInfos),t.xp6(6),t.Q6J("icon",n.addIcon),t.xp6(12),t.Q6J("ngForOf",n.publicHolidays),t.xp6(5),t.Q6J("icon",n.saveIcon))},dependencies:[m.sg,_.BN,c.Fj,c.JJ,c.oH]}),o})();var h=d(9646),T=d(1005),C=d(7044);let j=(()=>{class o{constructor(){}getBrands(){return(0,h.of)(C.qp).pipe((0,T.g)(500))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=d(3617);function J(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",8),t._UZ(2,"app-loading"),t.qZA()())}function N(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",10)(4,"fa-icon",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.editBrand(a))}),t.qZA(),t.TgZ(5,"fa-icon",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteBrand(a))}),t.qZA()()()}if(2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("icon",n.editIcon),t.xp6(1),t.Q6J("icon",n.deleteIcon)}}function F(o,i){if(1&o&&t.YNc(0,N,6,3,"tr",9),2&o){const e=t.oxw();t.Q6J("ngForOf",e.brands)}}let E=(()=>{class o{constructor(e,n){this.brandService=e,this.modalService=n,this.addIcon=l.r8p,this.deleteIcon=l.$aW,this.editIcon=l.Yai,this._brands=[],this._loading=!1}ngOnInit(){this.refreshBrands()}get brands(){return this._brands}get loading(){return this._loading}addBrand(){this.modalService.open(v,{backdrop:"static",size:"lg"})}deleteBrand(e){this.modalService.open(b.$,{backdrop:"static"}).componentInstance.message="\xcates-vous s\xfbr de vouloir supprimer cette enseigne ?"}editBrand(e){this.modalService.open(v,{backdrop:"static",size:"lg"}).componentInstance.brand=e}refreshBrands(){this._loading=!0,this.brandService.getBrands().pipe((0,f.P)(),(0,g.x)(()=>this._loading=!1)).subscribe(e=>this._brands=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(j),t.Y36(p.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-brand"]],decls:17,vars:3,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-primary",3,"click"],[3,"icon"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"text-end"],[4,"ngIf","ngIfElse"],["brandsView",""],["colspan","2"],[4,"ngFor","ngForOf"],[1,"text-end"],[1,"btn",3,"icon","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h4"),t._uU(2,"Enseignes"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.addBrand()}),t._UZ(4,"fa-icon",2),t._uU(5," Ajouter une enseigne "),t.qZA()(),t.TgZ(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),t._uU(10,"Nom"),t.qZA(),t.TgZ(11,"th",5),t._uU(12,"Actions"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,J,3,0,"tr",6),t.YNc(15,F,1,1,"ng-template",null,7,t.W1O),t.qZA()()),2&e){const r=t.MAs(16);t.xp6(4),t.Q6J("icon",n.addIcon),t.xp6(10),t.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[m.sg,m.O5,_.BN,Z.N]}),o})();var u=d(7564);const R=new Map([[u.FI.RateEnum.OneFifth,"1/5"],[u.FI.RateEnum.TwoFifths,"2/5"],[u.FI.RateEnum.Half,"Mi-temps"],[u.FI.RateEnum.ThreeFifths,"3/5"],[u.FI.RateEnum.FourFifths,"4/5"],[u.FI.RateEnum.Full,"Temps plein"]]);let L=(()=>{class o{transform(e){return R.get(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"employmentRate",type:o,pure:!0}),o})();function P(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"employmentRate"),t.qZA()()),2&o){const e=i.$implicit;t.xp6(2),t.hij(" ",e.start," "),t.xp6(2),t.hij(" ",e.end," "),t.xp6(2),t.hij(" ",e.role.name," "),t.xp6(2),t.hij(" ",e.brand.name," "),t.xp6(2),t.hij(" ",t.lcZ(11,5,e.rate)," ")}}function w(o,i){if(1&o&&(t.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th",29),t._uU(4,"D\xe9but"),t.qZA(),t.TgZ(5,"th",29),t._uU(6,"Fin"),t.qZA(),t.TgZ(7,"th",29),t._uU(8,"Fonction"),t.qZA(),t.TgZ(9,"th",29),t._uU(10,"Enseigne"),t.qZA(),t.TgZ(11,"th",29),t._uU(12,"Taux"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,P,12,7,"tr",30),t.qZA()()),2&o){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.employments)}}function Q(o,i){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA()()),2&o){const e=i.$implicit;t.xp6(2),t.hij(" ",e.start," "),t.xp6(2),t.hij(" ",e.end," "),t.xp6(2),t.hij(" ",t.lcZ(7,3,e.dailyRate)," ")}}function Y(o,i){if(1&o&&(t.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th",29),t._uU(4,"D\xe9but"),t.qZA(),t.TgZ(5,"th",29),t._uU(6,"Fin"),t.qZA(),t.TgZ(7,"th",29),t._uU(8,"TJM"),t.qZA()()(),t.TgZ(9,"tbody"),t.YNc(10,Q,8,5,"tr",30),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(10),t.Q6J("ngForOf",e.rates)}}function B(o,i){1&o&&(t.TgZ(0,"li",19)(1,"button",20),t._uU(2,"TJMs"),t.qZA(),t.YNc(3,Y,11,1,"ng-template",21),t.qZA())}let y=(()=>{class o{constructor(e,n){this.activeModal=e,this.fb=n,this.creating=!1,this.saveIcon=l.EdJ,this._employments=[],this._rates=[],this.collaboratorForm=this.fb.group({active:[!0,c.kI.required],contractor:[!1,c.kI.required],firstname:["",c.kI.required],lastname:["",c.kI.required],login:["",c.kI.required]})}ngOnInit(){const e=this.collaborator;if(e){const n=this.collaboratorForm.controls;n.active.setValue(e.active),n.contractor.setValue(e.contractor),n.firstname.setValue(e.firstname),n.lastname.setValue(e.lastname),n.login.setValue(e.login),this._employments=e.employments||[],this._rates=e.rates||[]}}get employments(){return this._employments}get rates(){return this._rates}cancel(){this.activeModal.dismiss()}save(){this.activeModal.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.Kz),t.Y36(c.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-collaborator-edit"]],inputs:{collaborator:"collaborator",creating:"creating"},decls:38,vars:6,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"container",3,"formGroup"],["for","edit-collaborator-login",1,"form-label"],["id","edit-collaborator-login","type","text","formControlName","login",1,"form-control",3,"readonly"],["for","edit-collaborator-firstname",1,"form-label"],["id","edit-collaborator-firstname","type","text","formControlName","firstname",1,"form-control"],["for","edit-collaborator-lastname",1,"form-label"],["id","edit-collaborator-lastname","type","text","formControlName","lastname",1,"form-control"],[1,"row"],[1,"col-6"],[1,"form-check","form-switch"],["type","checkbox","id","edit-collaborator-contractor","formControlName","contractor",1,"form-check-input",3,"readonly"],["for","edit-collaborator-contractor",1,"form-check-label"],["type","checkbox","id","edit-collaborator-active","formControlName","active",1,"form-check-input"],["for","edit-collaborator-active",1,"form-check-label"],["ngbNav","",1,"nav-tabs"],["nav","ngbNav"],["ngbNavItem",""],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","",4,"ngIf"],[1,"mt-2",3,"ngbNavOutlet"],[1,"modal-footer"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"icon"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.cancel()}),t.qZA()(),t.TgZ(2,"div",2)(3,"form",3)(4,"label",4),t._uU(5,"Login: "),t.qZA(),t._UZ(6,"input",5),t.TgZ(7,"label",6),t._uU(8,"Pr\xe9nom: "),t.qZA(),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11,"Nom: "),t.qZA(),t._UZ(12,"input",9),t.TgZ(13,"div",10)(14,"div",11)(15,"div",12),t._UZ(16,"input",13),t.TgZ(17,"label",14),t._uU(18," Externe "),t.qZA()()(),t.TgZ(19,"div",11)(20,"div",12),t._UZ(21,"input",15),t.TgZ(22,"label",16),t._uU(23," Profile actif "),t.qZA()()()(),t.TgZ(24,"ul",17,18)(26,"li",19)(27,"button",20),t._uU(28,"Postes"),t.qZA(),t.YNc(29,w,15,1,"ng-template",21),t.qZA(),t.YNc(30,B,4,0,"li",22),t.qZA(),t._UZ(31,"div",23),t.qZA()(),t.TgZ(32,"div",24)(33,"button",25),t.NdJ("click",function(){return n.cancel()}),t._uU(34,"Annuler"),t.qZA(),t.TgZ(35,"button",26),t.NdJ("click",function(){return n.save()}),t._UZ(36,"fa-icon",27),t._uU(37," Enregistrer "),t.qZA()()),2&e){const r=t.MAs(25);t.xp6(3),t.Q6J("formGroup",n.collaboratorForm),t.xp6(3),t.Q6J("readonly",!n.creating),t.xp6(10),t.Q6J("readonly",!n.creating),t.xp6(14),t.Q6J("ngIf",n.collaboratorForm.controls.contractor.value),t.xp6(1),t.Q6J("ngbNavOutlet",r),t.xp6(5),t.Q6J("icon",n.saveIcon)}},dependencies:[m.sg,m.O5,p.uN,p.Pz,p.nv,p.Is,p.Fh,p.tO,p.Dy,_.BN,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.sg,c.u,m.H9,L]}),o})(),M=(()=>{class o{constructor(){}getCollaborators(){return(0,h.of)(C.vt).pipe((0,T.g)(500))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function O(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",8),t._UZ(2,"app-loading"),t.qZA()())}function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"fa-icon",10),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"fa-icon",10),t.qZA(),t.TgZ(15,"td",11)(16,"fa-icon",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.editCollaborator(a))}),t.qZA(),t.TgZ(17,"fa-icon",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteCollaborator(a))}),t.qZA()()()}if(2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.login," "),t.xp6(2),t.hij(" ",e.firstname," "),t.xp6(2),t.hij(" ",e.lastname," "),t.xp6(2),t.hij(" ",null==e.currentBrand?null:e.currentBrand.name," "),t.xp6(2),t.hij(" ",null==e.currentRole?null:e.currentRole.name," "),t.xp6(2),t.Q6J("icon",e.contractor?n.checkedIcon:n.uncheckedIcon),t.xp6(2),t.Q6J("icon",e.active?n.checkedIcon:n.uncheckedIcon),t.xp6(2),t.Q6J("icon",n.editIcon),t.xp6(1),t.Q6J("icon",n.deleteIcon)}}function H(o,i){if(1&o&&t.YNc(0,S,18,9,"tr",9),2&o){const e=t.oxw();t.Q6J("ngForOf",e.collaborators)}}let $=(()=>{class o{constructor(e,n){this.collaboratorService=e,this.modalService=n,this.addIcon=l.r8p,this.checkedIcon=l.a3n,this.deleteIcon=l.$aW,this.editIcon=l.Yai,this.uncheckedIcon=l.pL1,this._collaborators=[],this._loading=!1}ngOnInit(){this.refreshCollaborators()}get collaborators(){return this._collaborators}get loading(){return this._loading}addCollaborator(){this.modalService.open(y,{backdrop:"static",size:"lg"}).componentInstance.creating=!0}deleteCollaborator(e){this.modalService.open(b.$,{backdrop:"static"}).componentInstance.message="\xcates-vous s\xfbr de vouloir supprimer ce collaborateur ?"}editCollaborator(e){this.modalService.open(y,{backdrop:"static",size:"lg"}).componentInstance.collaborator=e}refreshCollaborators(){this._loading=!0,this.collaboratorService.getCollaborators().pipe((0,f.P)(),(0,g.x)(()=>this._loading=!1)).subscribe(e=>this._collaborators=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(M),t.Y36(p.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-collaborators"]],decls:29,vars:3,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-primary",3,"click"],[3,"icon"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"text-end"],[4,"ngIf","ngIfElse"],["collaboratorsView",""],["colspan","7"],[4,"ngFor","ngForOf"],[1,"text-primary",3,"icon"],[1,"text-end"],[1,"btn",3,"icon","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h4"),t._uU(2,"Collaborateurs"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.addCollaborator()}),t._UZ(4,"fa-icon",2),t._uU(5," Ajouter un collaborateur "),t.qZA()(),t.TgZ(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),t._uU(10,"Login"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"Pr\xe9nom"),t.qZA(),t.TgZ(13,"th",4),t._uU(14,"Nom"),t.qZA(),t.TgZ(15,"th",4),t._uU(16,"Enseigne"),t.qZA(),t.TgZ(17,"th",4),t._uU(18,"R\xf4le"),t.qZA(),t.TgZ(19,"th",4),t._uU(20,"Externe"),t.qZA(),t.TgZ(21,"th",4),t._uU(22,"Actif"),t.qZA(),t.TgZ(23,"th",5),t._uU(24,"Actions"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,O,3,0,"tr",6),t.YNc(27,H,1,1,"ng-template",null,7,t.W1O),t.qZA()()),2&e){const r=t.MAs(28);t.xp6(4),t.Q6J("icon",n.addIcon),t.xp6(22),t.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[m.sg,m.O5,_.BN,Z.N]}),o})(),k=(()=>{class o{constructor(e,n){this.fb=e,this.activeModal=n,this.saveIcon=l.EdJ,this.calendarIcon=l.fT7,this.projectForm=this.fb.group({name:["",c.kI.required],code:["",c.kI.required],start:[null],end:[null]})}ngOnInit(){const e=this.project;if(e){const n=this.projectForm.controls;n.name.setValue(e.name),n.code.setValue(e.code);const r=e.start;if(r){const s=new Date(r);n.start.setValue({year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate()})}const a=e.end;if(a){const s=new Date(a);n.end.setValue({year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate()})}}}cancel(){this.activeModal.dismiss()}save(){this.activeModal.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.qu),t.Y36(p.Kz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-project-edit"]],inputs:{project:"project"},decls:33,vars:4,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"container",3,"formGroup"],["for","edit-project-name",1,"form-label"],["id","edit-project-name","type","text","formControlName","name",1,"form-control"],["for","edit-project-code",1,"form-label"],["id","edit-project-code","type","text","formControlName","code",1,"form-control"],[1,"row"],[1,"col-6"],["for","edit-project-start",1,"form-label"],[1,"input-group"],["id","edit-project-start","placeholder","yyyy-mm-dd","formControlName","start","ngbDatepicker","",1,"form-control"],["startDp","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"icon"],["for","edit-project-end",1,"form-label"],["id","edit-project-end","placeholder","yyyy-mm-dd","formControlName","end","ngbDatepicker","",1,"form-control"],["endDp","ngbDatepicker"],[1,"modal-footer"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.cancel()}),t.qZA()(),t.TgZ(2,"div",2)(3,"form",3)(4,"label",4),t._uU(5,"Nom: "),t.qZA(),t._UZ(6,"input",5),t.TgZ(7,"label",6),t._uU(8,"Code: "),t.qZA(),t._UZ(9,"input",7),t.TgZ(10,"div",8)(11,"div",9)(12,"label",10),t._uU(13,"D\xe9but: "),t.qZA(),t.TgZ(14,"div",11),t._UZ(15,"input",12,13),t.TgZ(17,"button",14),t.NdJ("click",function(){t.CHM(r);const s=t.MAs(16);return t.KtG(s.toggle())}),t._UZ(18,"fa-icon",15),t.qZA()()(),t.TgZ(19,"div",9)(20,"label",16),t._uU(21,"Fin: "),t.qZA(),t.TgZ(22,"div",11),t._UZ(23,"input",17,18),t.TgZ(25,"button",14),t.NdJ("click",function(){t.CHM(r);const s=t.MAs(24);return t.KtG(s.toggle())}),t._UZ(26,"fa-icon",15),t.qZA()()()()()(),t.TgZ(27,"div",19)(28,"button",20),t.NdJ("click",function(){return n.cancel()}),t._uU(29,"Annuler"),t.qZA(),t.TgZ(30,"button",21),t.NdJ("click",function(){return n.save()}),t._UZ(31,"fa-icon",15),t._uU(32," Enregistrer "),t.qZA()()}2&e&&(t.xp6(3),t.Q6J("formGroup",n.projectForm),t.xp6(15),t.Q6J("icon",n.calendarIcon),t.xp6(8),t.Q6J("icon",n.calendarIcon),t.xp6(5),t.Q6J("icon",n.saveIcon))},dependencies:[p.J4,_.BN,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]}),o})(),D=(()=>{class o{constructor(e){this.activeModal=e,this.saveIcon=l.EdJ,this.file=new c.NI("")}cancel(){this.activeModal.dismiss()}save(){this.activeModal.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.Kz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-projects-import"]],decls:13,vars:2,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["for","projects-import-file",1,"form-label"],["id","projects-import-file","type","file",1,"form-control",3,"formControl"],[1,"modal-footer"],["type","button",1,"btn",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"icon"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.cancel()}),t.qZA()(),t.TgZ(2,"div",2)(3,"div")(4,"label",3),t._uU(5,"Fichier: "),t.qZA(),t._UZ(6,"input",4),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return n.cancel()}),t._uU(9,"Annuler"),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.save()}),t._UZ(11,"fa-icon",8),t._uU(12," Enregistrer "),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("formControl",n.file),t.xp6(5),t.Q6J("icon",n.saveIcon))},dependencies:[_.BN,c.Fj,c.JJ,c.oH]}),o})();var G=d(2632);function W(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",9),t._UZ(2,"app-loading"),t.qZA()())}function K(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",11)(10,"fa-icon",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.editProject(a))}),t.qZA(),t.TgZ(11,"fa-icon",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteProject(a))}),t.qZA()()()}if(2&o){const e=i.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.code," "),t.xp6(2),t.hij(" ",e.start," "),t.xp6(2),t.hij(" ",e.end," "),t.xp6(2),t.Q6J("icon",n.editIcon),t.xp6(1),t.Q6J("icon",n.deleteIcon)}}function V(o,i){if(1&o&&t.YNc(0,K,12,6,"tr",10),2&o){const e=t.oxw();t.Q6J("ngForOf",e.projects)}}let z=(()=>{class o{constructor(e,n){this.projectService=e,this.modalService=n,this.addIcon=l.r8p,this.deleteIcon=l.$aW,this.editIcon=l.Yai,this.importIcon=l.Vmj,this._projects=[],this._loading=!1}ngOnInit(){this.refreshProjects()}get projects(){return this._projects}get loading(){return this._loading}addProject(){this.modalService.open(k,{backdrop:"static",size:"lg"})}deleteProject(e){this.modalService.open(b.$,{backdrop:"static"}).componentInstance.message="\xcates-vous s\xfbr de vouloir supprimer ce projet ?"}editProject(e){this.modalService.open(k,{backdrop:"static",size:"lg"}).componentInstance.project=e}importProjects(){this.modalService.open(D,{backdrop:"static"})}refreshProjects(){this._loading=!0,this.projectService.getAllProjects().pipe((0,f.P)(),(0,g.x)(()=>this._loading=!1)).subscribe(e=>this._projects=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(G.Y),t.Y36(p.FF))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-projects-list"]],decls:27,vars:4,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-primary","me-1",3,"click"],[3,"icon"],[1,"btn","btn-primary",3,"click"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"text-end"],[4,"ngIf","ngIfElse"],["rolesView",""],["colspan","5"],[4,"ngFor","ngForOf"],[1,"text-end"],[1,"btn",3,"icon","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h4"),t._uU(2,"Projets"),t.qZA(),t.TgZ(3,"div")(4,"button",1),t.NdJ("click",function(){return n.importProjects()}),t._UZ(5,"fa-icon",2),t._uU(6," Importer... "),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return n.addProject()}),t._UZ(8,"fa-icon",2),t._uU(9," Ajouter un projet "),t.qZA()()(),t.TgZ(10,"table",4)(11,"thead")(12,"tr")(13,"th",5),t._uU(14,"Nom"),t.qZA(),t.TgZ(15,"th",5),t._uU(16,"Code"),t.qZA(),t.TgZ(17,"th",5),t._uU(18,"D\xe9but"),t.qZA(),t.TgZ(19,"th",5),t._uU(20,"Fin"),t.qZA(),t.TgZ(21,"th",6),t._uU(22,"Actions"),t.qZA()()(),t.TgZ(23,"tbody"),t.YNc(24,W,3,0,"tr",7),t.YNc(25,V,1,1,"ng-template",null,8,t.W1O),t.qZA()()),2&e){const r=t.MAs(26);t.xp6(5),t.Q6J("icon",n.importIcon),t.xp6(3),t.Q6J("icon",n.addIcon),t.xp6(16),t.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[m.sg,m.O5,_.BN,Z.N]}),o})(),X=(()=>{class o{constructor(){}getRoles(){return(0,h.of)(C.K$).pipe((0,T.g)(500))}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function tt(o,i){1&o&&(t.TgZ(0,"tr")(1,"td",10),t._UZ(2,"app-loading"),t.qZA()())}function et(o,i){1&o&&t.GkF(0)}function ot(o,i){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,et,1,0,"ng-container",13),t.qZA()),2&o){t.oxw(2);const e=t.MAs(21);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function nt(o,i){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"fa-icon",14),t.qZA(),t.TgZ(5,"td",15)(6,"fa-icon",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.editRole(r))}),t.qZA(),t.TgZ(7,"fa-icon",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.deleteRole(r))}),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("icon",e.production?n.checkedIcon:n.uncheckedIcon),t.xp6(2),t.Q6J("icon",n.editIcon),t.xp6(1),t.Q6J("icon",n.deleteIcon)}}function rt(o,i){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,nt,8,4,"ng-container",7),t.qZA()),2&o){const e=i.$implicit,n=t.oxw(2),r=t.MAs(21);t.xp6(1),t.Q6J("ngIf",e!==n.editingRole)("ngIfElse",r)}}function it(o,i){if(1&o&&(t.YNc(0,ot,2,1,"tr",11),t.YNc(1,rt,2,2,"tr",12)),2&o){const e=t.oxw();t.Q6J("ngIf",e.isAddingRole),t.xp6(1),t.Q6J("ngForOf",e.roles)}}function ct(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td"),t._UZ(1,"input",17),t.qZA(),t.TgZ(2,"td"),t._UZ(3,"input",18),t.qZA(),t.TgZ(4,"td",15)(5,"fa-icon",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.saveEdit())}),t.qZA(),t.TgZ(6,"fa-icon",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancelEdit())}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("icon",e.saveIcon),t.xp6(1),t.Q6J("icon",e.cancelIcon)}}const lt=[{path:"brands",component:E},{path:"collaborators",component:$},{path:"projects",component:z},{path:"roles",component:(()=>{class o{constructor(e,n,r){this.roleService=e,this.modalService=n,this.fb=r,this.addIcon=l.r8p,this.cancelIcon=l.g82,this.checkedIcon=l.a3n,this.deleteIcon=l.$aW,this.editIcon=l.Yai,this.uncheckedIcon=l.pL1,this.saveIcon=l.EdJ,this.editForm=this.fb.group({name:["",c.kI.required],production:[!1,c.kI.required]}),this.addingRole=!1,this._roles=[],this._loading=!1}ngOnInit(){this.refreshRoles()}get isAddingRole(){return this.addingRole}get editingRole(){return this._editingRole}get roles(){return this._roles}get loading(){return this._loading}addRole(){this.editForm.reset(),this.addingRole=!0}cancelEdit(){this.addingRole=!1,this._editingRole=void 0}deleteRole(e){this.modalService.open(b.$,{backdrop:"static"}).componentInstance.message="\xcates-vous s\xfbr de vouloir supprimer ce r\xf4le ?"}editRole(e){this._editingRole=e;const n=this.editForm.controls;n.name.setValue(e.name),n.production.setValue(e.production)}saveEdit(){}refreshRoles(){this._loading=!0,this.roleService.getRoles().pipe((0,f.P)(),(0,g.x)(()=>this._loading=!1)).subscribe(e=>this._roles=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(X),t.Y36(p.FF),t.Y36(c.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-roles"]],decls:22,vars:4,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"btn","btn-primary",3,"click"],[3,"icon"],[3,"formGroup"],[1,"table","table-striped"],["scope","col"],["scope","col",1,"text-end"],[4,"ngIf","ngIfElse"],["rolesView",""],["editingRow",""],["colspan","3"],[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet"],[1,"text-primary",3,"icon"],[1,"text-end"],[1,"btn",3,"icon","click"],["type","text","formControlName","name"],["type","checkbox","formControlName","production"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h4"),t._uU(2,"R\xf4les"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return n.addRole()}),t._UZ(4,"fa-icon",2),t._uU(5," Ajouter un r\xf4le "),t.qZA()(),t.TgZ(6,"form",3)(7,"table",4)(8,"thead")(9,"tr")(10,"th",5),t._uU(11,"Nom"),t.qZA(),t.TgZ(12,"th",5),t._uU(13,"Production"),t.qZA(),t.TgZ(14,"th",6),t._uU(15,"Actions"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,tt,3,0,"tr",7),t.YNc(18,it,2,2,"ng-template",null,8,t.W1O),t.qZA(),t.YNc(20,ct,7,2,"ng-template",null,9,t.W1O),t.qZA()()),2&e){const r=t.MAs(19);t.xp6(4),t.Q6J("icon",n.addIcon),t.xp6(2),t.Q6J("formGroup",n.editForm),t.xp6(11),t.Q6J("ngIf",n.loading)("ngIfElse",r)}},dependencies:[m.sg,m.O5,m.tP,_.BN,Z.N,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.sg,c.u]}),o})()}];let at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[x.Bz.forChild(lt),x.Bz]}),o})(),st=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[I.m,at]}),o})()}}]);